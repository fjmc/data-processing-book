<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="generator" content="pandoc">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">
    <title></title>
    <style type="text/css">code{white-space: pre;}</style>
    <link rel="stylesheet" href="pandoc.css">
    <!--[if lt IE 9]>
        <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv-printshiv.min.js"></script>
    <![endif]-->
</head>
<body>
<h1 id="module-2-simple-selection-and-saving-data-on-disk">Module 2 – Simple selection and saving data on disk</h1>
<h2 id="objectives">Objectives:</h2>
<ul>
<li>Transform a selection criterion into actual Python code</li>
<li>Implement the selection process in Python</li>
<li>Save the selected information on a new file</li>
</ul>
<h2 id="input">Input:</h2>
<ul>
<li>File: <a href="files/metabolic_pathways.xls">metabolic_pathways.csv</a></li>
</ul>
<h2 id="output">Output:</h2>
<ul>
<li>File: <code>selected1.csv</code>
<ul>
<li>containing the data of the pathway <code>hsa04210</code>.</li>
</ul></li>
<li>File: <code>selected2.csv</code>
<ul>
<li>containing the data of the pathway <code>hsa00730</code> and <code>hsa04122</code>.</li>
</ul></li>
</ul>
<h2 id="steps">Steps:</h2>
<ol type="1">
<li><p>Let’s create a Python function that determines whether the path ID of a pathway is <code>hsa04210</code>:</p>
<ol type="a">
<li><p>Create an empty file and save it as <code>module2.py</code> on the same folder where the <code>metabolic_pathways.csv</code> file is. Do not forget the <code>.py</code> ending, as this instructs the computer that the file is a Python script.</p></li>
<li><p>Copy and paste the following code to your file:</p>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python"><span class="kw">def</span> filter1(path):
    path_id <span class="op">=</span> path[???]  <span class="co"># Select the column for the ID</span>

    <span class="cf">if</span> path_id <span class="op">==</span> <span class="st">&#39;???&#39;</span>: <span class="co"># Replace with the ID we are searching for</span>
        <span class="cf">return</span> <span class="va">True</span>
    <span class="cf">else</span>:
        <span class="cf">return</span> <span class="va">False</span></code></pre></div></li>
<li><p>Replace the green question marks (<code>???</code>) with appropriate Python code.</p></li>
</ol></li>
<li><p>The previous code is just a function that will run when we call it, but does not do anything on its own. Let’s add more code to the file so that we actually go through each pathway and use the filter on it.</p>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python"><span class="im">import</span> csv

<span class="co"># ------------------------------------- #</span>
<span class="co"># PLACE THE FUNCTION DEFINED ABOVE HERE #</span>
<span class="co"># ------------------------------------- #</span>

<span class="co"># Open the original file and read all pathways</span>
file_to_read <span class="op">=</span> <span class="bu">open</span>(<span class="st">&#39;metabolic_pathways.csv&#39;</span>)
paths <span class="op">=</span> csv.reader(file_to_read, delimiter<span class="op">=</span>???)

<span class="co"># Open the file where we will save the selection</span>
file_to_write <span class="op">=</span> <span class="bu">open</span>(<span class="st">&#39;selected1.csv&#39;</span>, <span class="st">&#39;w&#39;</span>)
w <span class="op">=</span> csv.writer(file_to_write, delimiter<span class="op">=</span>???)

<span class="cf">for</span> path <span class="op">in</span> paths:
    <span class="cf">if</span> filter1(path):
        w.writerow(path)

<span class="co"># Close the file</span>
file_to_write.close()</code></pre></div></li>
<li><p>Run <code>module2.py</code> and study the file that was produced. Make sure it corresponds to what you were expecting.</p></li>
<li><p>Edit the file <code>module2.py</code> by creating a new filter <code>filter2</code> which selects the pathways where the enzyme Q9Y697 participates. If necessary, consult the documentation for the function <code>str.split</code> at <a href="https://docs.python.org/2/library/stdtypes.html#str.split" class="uri">https://docs.python.org/2/library/stdtypes.html#str.split</a>.</p>
<ol type="a">
<li><p>Create the new function <code>filter2</code>:</p>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python"><span class="kw">def</span> filter2(path):
    field <span class="op">=</span> path[???] <span class="co"># Select the column for the list of enzymes</span>

    <span class="co"># Break that information into a list</span>
    enzyme_list <span class="op">=</span> <span class="bu">str</span>.split(field, ???)

    <span class="co"># enzyme_list is now a list of strings, such as follows:</span>
    <span class="co"># [&#39;H9EC08&#39;, &#39;P03905&#39;, &#39;G9LG04&#39;, &#39;P03901&#39;]</span>

    <span class="co"># Return True if our selected enzyme is in that list</span>
    <span class="cf">if</span> <span class="st">&#39;???&#39;</span> <span class="op">in</span> enzyme_list:
        <span class="cf">return</span> <span class="va">True</span>
    <span class="cf">else</span>:
        <span class="cf">return</span> <span class="va">False</span></code></pre></div></li>
<li><p>Also change <code>'selected1.csv'</code> into <code>'selected2.csv'</code>. This ensures that the new output will not overwrite the previous one.</p></li>
</ol></li>
<li><p>Run <code>module2.py</code> again and study the file that was produced. Make sure it corresponds to what you were expecting; in particular, make sure all the selected pathways contain the enzyme Q9Y697.</p></li>
<li><p>Make sure you keep a copy of the <code>selected1.csv</code> and <code>selected2.csv</code> files to yourself, so that you can use them in the next modules. For example, send it to you by email or upload it to Dropbox.</p></li>
<li><p>Submit your code and the answers to the quiz below to moodle.</p></li>
</ol>
<h2 id="quiz">Quiz:</h2>
<ol type="1">
<li><p>Create a new filter function <code>filter3</code> that selects the pathways that are part of the class “Human Diseases; Cancers”.</p></li>
<li><p>Using the built-in function <code>len</code>, which returns the number of elements in a list, create a function <code>filter4</code> that selects pathways containing at most 10 enzymes. The documentation for this function can be found in <a href="https://docs.python.org/2/library/functions.html#len" class="uri">https://docs.python.org/2/library/functions.html#len</a></p></li>
</ol>
<p><strong>Note</strong>: to read and write CSV files in Python, we have been using the <code>csv</code> module. This module allows us to specify the format of the file to read/write, <em>e.g.</em> which character to use to separate the fields and to delimit the fields. You should familiarize yourself with this module by reading its documentation at <a href="https://docs.python.org/2/library/csv.html" class="uri">https://docs.python.org/2/library/csv.html</a>.</p>
<script src="https://code.jquery.com/jquery-2.2.4.min.js" integrity="sha256-BbhdlvQf/xTY9gja0Dq3HiwQF8LaCRTXxZKRutelT44=" crossorigin="anonymous"></script>
<script>

// Replace all instances of "???" inside <code> elements with the HTML code:
// <span class="blank">?</span>
$("code").html(function () {
    return $(this).html().replace(/\?\?\?/g, "<span class=\"blank\">?</span>");
});

// "print" is a builtin in python3 but a keyworkd in python2.
// Let's make sure this change happens
$("span.bu").each(function() {
    if ($(this).text() == "print") {
        $(this).removeClass('bu');
        $(this).addClass('kw');
    }
})

</script>
</body>
</html>
